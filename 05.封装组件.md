# 封装组件
![](./images/Jietu20171212-160919.jpg)


### 封装modal组件

1. 考虑组件需要暴露出的属性


    /*
        设置的props：
            modalTitle 提醒信息 默认为 '这是一个模态框'

        定制模板：
            slot为modal-content  定制提醒信息模板
            slot为modal-footer   定制底部模板

        监控子组件状态变化：
            事件名on-ok        点击确定触发
            事件名on-cancel   点击取消触发
    */

2. 组件定义


    <script>
      Vue.component("model", {

        props : {
          modalTitle : {
            type : String,
            default: "这是一个model"
          }
        },

        template: `
          <div class="modal">
            <div class="modal-header">
              <h4>{{modalTitle}}</h4>
            </div>
            <div class="modal-content">
              <div>

                <slot name="modal-content">在这里添加内容</slot>

              </div>
            </div>
            <div class="modal-footer">

              <slot name="modal-footer">

                <input class="btn blue" type="button" value="确定" @click="okHandle"/>
                <input class="btn" type="button" value="取消" @click="cancelHandle"/>

              </slot>

            </div>
          </div>
          `,
          methods : {
            okHandle (){
              // 通知父组件 点击了确定
              this.$emit('on-ok');
            },
            cancelHandle (){
              // 通知父组件 点击了确定
              this.$emit('on-cancel');
            }
          }
      });
    </script>

3. 调用组件


    <div id="app">

      <model modal-title = "提醒" @on-ok="onOk" @on-cancel="onCancel"></model>

      <model>
        <ul slot="modal-content">
          <li v-for="item of list">
            {{item}}
          </li>
        </ul>
        <div slot="modal-footer">
          <span>确定</span>
          <span>取消</span>
          <span>返回</span>
        </div>
      </model>

      <model @on-cancel="onCancel"></model>

    </div>

    <script>
      var list = [...'水电费水电费尚方式离开家了']; // 扩展运算符

      new Vue({
        el: '#app',
        data : {
          list : list
        },
        methods : {
          onOk (){
            alert(1)
          },
          onCancel (){
            alert(2)
          }
        }
      })
    </script>

### 封装alert组件

  1. 考虑组件需要暴露出的属性


    /*
      alert提醒框有四种状态：
          info success error warning

      设置的props：
        type 提醒框类型 默认为info
        title 提示信息 '这里有一个消息要提示'
        closeable 是否禁用关闭 默认为true
        showicon 是否显示图标 默认为fasle
        style 设置提醒框样式 默认为{}

      定制模板：
        slot为iconTmp  定制icon模板
        slot为titleTmp 定制提示信息结构

      监控状态变化：
        事件名close-click   点击关闭X触发

    */
2. 组件定义

        <script>
          Vue.component("m-alert",{
            props : {
              type : {
                type : String,
                default : "info"
              },
              title : {
                type : String,
                default : "这是一个消息"
              },
              closeable : {
                type : Boolean,
                default : true
              },
              showicon : {
                type : Boolean,
                default : false
              },
              style : String,
            },
            computed : {
              classes (){
                return `m-alert-${this.type}`;
              },
              iconClass (){
                return `m-icon-${this.type}`;
              }
            },
            template : `
              <div class="m-alert" :class = "[classes]" style="style">
                  <slot name="iconTemp">
                    <i v-show="showicon" class="m-icon" :class = "[iconClass]"></i>
                  </slot>
                  <div class="m-content">
                    <slot name="titleTemp">
                      <span class="m-message">{{title}}</span>
                    </slot>
                    <i class="m-closebtn m-icon-close" v-show="!closeable" @click="closeHandel"></i>
                  </div>
                </div>
            `,
            methods : {
              closeHandel (){
                this.$emit('on-click');
              }
            }
          });
        </script>

3. 调用组件


          <div id="app">
            <m-alert type="info"></m-alert>
            <m-alert
              type="success"
              title="已成功"
              :closeable="false"
              :showicon="true"
            ></m-alert>
            <m-alert type="error">
              <i class="m-icon m-icon-menu" slot="iconTemp"></i>
              <template islot="titleTemp">
                <div slot="titleTemp">sss</div>
                <div slot="titleTemp">sss</div>
                <div slot="titleTemp">sss</div>
              </template>
            </m-alert>
            <m-alert
              type="warning"
              style="background : #333"
              :closeable="false"
              @on-click = "onClickHandel"
            >
                <div slot="titleTemp">sss</div>
            </m-alert>
          </div>

          <script>
            new Vue({
              el : "#app",
              methods : {
                onClickHandel (){
                  console.log(1)
                }
              }
            })
          </script>
